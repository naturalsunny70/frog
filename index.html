<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Turtle Run Game</title>
    <style>
        body { text-align: center; font-family: Arial, sans-serif; margin: 0; overflow: hidden; }
        canvas { background: lightblue; display: block; margin: 20px auto; width: 100%; max-width: 800px; height: auto; }
        #score { position: absolute; top: 10px; left: 10px; font-size: 20px; }
        #startButton, #toggleMusic, #easyMode, #hardMode { margin: 10px; padding: 10px; font-size: 16px; cursor: pointer; }
    </style>
</head>
<body>
    <div id="score">Score: 0</div>
    <button id="startButton">Start Game</button>
    <button id="toggleMusic">Toggle Music</button>
    <button id="easyMode">ê²Œì„ 1ë‹¨ê³„</button>
    <button id="hardMode">ê²Œì„ 2ë‹¨ê³„</button>
    <canvas id="gameCanvas"></canvas>
    <audio id="bgMusic" loop>
        <source src="1.mp3" type="audio/mpeg">
    </audio>
    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        const scoreDisplay = document.getElementById("score");
        const startButton = document.getElementById("startButton");
        const bgMusic = document.getElementById("bgMusic");
        const toggleMusicButton = document.getElementById("toggleMusic");
        const easyModeButton = document.getElementById("easyMode");
        const hardModeButton = document.getElementById("hardMode");

        // ìº”ë²„ìŠ¤ í¬ê¸°ë¥¼ ë™ì ìœ¼ë¡œ ì„¤ì •
        canvas.width = 800;
        canvas.height = 400;

        let gameRunning = false;
        let score = 0;
        let startTime;
        let obstacles = [];
        let obstacleSpeed = 5;
        let musicPlaying = false;
        let nextObstacleTime = Date.now() + Math.random() * 2000 + 1000;
        let difficulty = "easy";

        let frog = { x: 50, y: 350, width: 40, height: 30, velocityY: 0, gravity: 1.5 };

        function drawFrog() {
            ctx.fillStyle = "green";
            ctx.fillRect(frog.x, frog.y, frog.width, frog.height);
            ctx.fillRect(frog.x - 10, frog.y + 10, 15, 15);
            ctx.fillRect(frog.x + 35, frog.y + 10, 15, 15);
            ctx.fillStyle = "black";
            ctx.beginPath();
            ctx.arc(frog.x + 10, frog.y - 5, 5, 0, Math.PI * 2);
            ctx.arc(frog.x + 30, frog.y - 5, 5, 0, Math.PI * 2);
            ctx.fill();
        }

        function drawObstacles() {
            ctx.fillStyle = "brown";
            obstacles.forEach(obstacle => {
                ctx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);
            });
        }

        function checkCollision() {
            return obstacles.some(obstacle => {
                return (
                    frog.x < obstacle.x + obstacle.width &&
                    frog.x + frog.width > obstacle.x &&
                    frog.y + frog.height > obstacle.y
                );
            });
        }

        function updateGame() {
            if (!gameRunning) return;
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // ê°œêµ¬ë¦¬ ì í”„ ì²˜ë¦¬
            frog.y += frog.velocityY;
            frog.velocityY += frog.gravity;
            if (frog.y + frog.height > canvas.height) {
                frog.y = canvas.height - frog.height;
                frog.velocityY = 0;
            }

            // ì¥ì• ë¬¼ ì´ë™ ë° ìƒì„±
            obstacles.forEach(obstacle => {
                obstacle.x -= obstacleSpeed;
            });

            if (Date.now() > nextObstacleTime) {
                obstacles.push({ x: canvas.width, y: 370, width: 40, height: 30 });
                nextObstacleTime = Date.now() + Math.random() * 2000 + 1000;
            }

            // ì¥ì• ë¬¼ ì œê±° & ì ìˆ˜ ì¦ê°€
            if (obstacles.length > 0 && obstacles[0].x + obstacles[0].width < 0) {
                obstacles.shift();
                score += 10;
                scoreDisplay.textContent = "Score: " + score;
            }

            // ì¶©ëŒ ê°ì§€ í›„ ê²Œì„ ì¢…ë£Œ
            if (checkCollision()) {
                gameRunning = false;
                alert("Game Over! Final Score: " + score);
                location.reload();
            }

            // 1ë¶„ í›„ ì¥ì• ë¬¼ ì†ë„ ì¦ê°€
            if (Date.now() - startTime >= 60000) {
                alert("New Level Unlocked! ì¥ì• ë¬¼ ì†ë„ê°€ ì¦ê°€í•©ë‹ˆë‹¤.");
                obstacleSpeed += 2;
                startTime = Date.now();
            }

            drawFrog();
            drawObstacles();
            requestAnimationFrame(updateGame);
        }

        // í‚¤ë³´ë“œ ì´ë²¤íŠ¸ (ì í”„)
        document.addEventListener("keydown", (e) => {
            if ((e.code === "Space" || e.code === "ArrowUp") && frog.y >= canvas.height - frog.height) {
                frog.velocityY = -20;
            }
        });

        // ğŸ“± í„°ì¹˜ ì´ë²¤íŠ¸ ì¶”ê°€ (ëª¨ë°”ì¼ì—ì„œ ì í”„ ê°€ëŠ¥)
        canvas.addEventListener("touchstart", () => {
            if (frog.y >= canvas.height - frog.height) {
                frog.velocityY = -20;
            }
        });

        startButton.addEventListener("click", () => {
            if (!gameRunning) {
                gameRunning = true;
                score = 0;
                obstacleSpeed = difficulty === "easy" ? 5 : 8;
                scoreDisplay.textContent = "Score: 0";
                obstacles = [];
                startTime = Date.now();
                updateGame();
                bgMusic.play().catch(err => console.log("Music play blocked", err));
            }
        });

        toggleMusicButton.addEventListener("click", () => {
            if (musicPlaying) {
                bgMusic.pause();
            } else {
                bgMusic.play().catch(err => console.log("Music play blocked", err));
            }
            musicPlaying = !musicPlaying;
        });

        easyModeButton.addEventListener("click", () => {
            difficulty = "easy";
            alert("Easy Mode Selected. ì¥ì• ë¬¼ ì†ë„: 5");
        });

        hardModeButton.addEventListener("click", () => {
            difficulty = "hard";
            alert("Hard Mode Selected. ì¥ì• ë¬¼ ì†ë„: 8");
        });
    </script>
</body>
</html>
